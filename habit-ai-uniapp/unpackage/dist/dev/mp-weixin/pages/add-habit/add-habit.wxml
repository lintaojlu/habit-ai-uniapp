<view class="container"><view wx:if="{{a}}" class="step"><text class="title">建立一个习惯/任务</text><input class="habit-input" type="text" maxlength="20" placeholder="例如：保持运动。从简单做起更易坚持！" value="{{b}}" bindinput="{{c}}"/><view class="input-footer"><text class="counter">{{d}}/20</text></view><block wx:if="{{r0}}"><textarea class="habit-input flag-input" maxlength="100" placeholder="你可以描述你的困惑或量化你的目标。例如：我的目标是不熬夜，我希望每天调整半小时，最终稳定11点睡觉。目标尽可能详细，AI需要数据才能了解你哦～🫰" value="{{e}}" bindinput="{{f}}"/></block><view class="input-footer"><text class="counter">{{g}}/100</text></view><view class="target-date"><text class="target-title">目标完成时间</text><picker mode="date" value="{{j}}" start="{{k}}" bindchange="{{l}}" class="date-picker"><view class="date-display"><text class="date">{{h}}</text><text class="days-left">(还有 {{i}} 天)</text></view></picker></view><view class="reminder-times"><text class="reminder-title">设置提醒时间</text><scroll-view scroll-y class="reminder-scroll" style="{{'height:' + n}}"><view class="reminder-list"><view wx:for="{{m}}" wx:for-item="time" wx:key="f" class="reminder-item"><picker mode="time" value="{{time.c}}" bindchange="{{time.d}}" class="time-picker"><view class="time-display"><text class="time">{{time.a}}</text><text class="period">{{time.b}}</text></view></picker><text class="delete-time" bindtap="{{time.e}}">×</text></view></view></scroll-view><view wx:if="{{o}}" class="add-time" bindtap="{{p}}"><text class="add-icon">+</text><text class="add-text">添加提醒时间</text></view></view><button class="next-button" bindtap="{{q}}">下一步</button></view><view wx:if="{{r}}" class="step step-category"><view class="step-header"><view class="back-button" bindtap="{{s}}"><text class="back-arrow">←</text></view><text class="habit-name">为"{{t}}"</text></view><text class="title">选择一个图标</text><view class="search-row"><input class="search-input" type="text" placeholder="搜索习惯" confirm-type="search" value="{{v}}" bindinput="{{w}}"/><view class="icon-settings" bindtap="{{z}}"><view class="icon-preview" style="{{'background-color:' + y}}"><text class="emoji">{{x}}</text></view><text class="settings-tip">自定义</text></view></view><text class="emoji-tip">已根据习惯名称自动匹配图标：{{A}}</text><view wx:if="{{B}}" class="settings-modal"><view class="modal-content"><view class="settings-preview"><view class="preview-box" style="{{'background-color:' + D}}"><text class="preview-emoji">{{C}}</text></view></view><view class="settings-section"><text class="section-title">自定义图标</text><block wx:if="{{r0}}"><textarea class="emoji-input" maxlength="4" placeholder="请输入emoji表情" bindinput="{{E}}" value="{{F}}"/></block></view><view class="settings-section"><text class="section-title">自定义颜色</text><view class="color-input-row"><input class="color-input" type="text" placeholder="#RRGGBB" bindinput="{{G}}" value="{{H}}"/><view class="custom-color-preview" style="{{'background-color:' + I}}"/></view></view><view class="settings-section"><view class="preset-colors"><view wx:for="{{J}}" wx:for-item="color" wx:key="c" class="{{['color-item', color.d && 'active']}}" bindtap="{{color.e}}"><view class="color-preview" style="{{'background-color:' + color.a}}"/><text class="color-name">{{color.b}}</text></view></view></view><view class="modal-footer"><view class="modal-buttons"><text class="reset-btn" bindtap="{{K}}">重置</text><text class="cancel-btn" bindtap="{{L}}">取消</text><text class="save-btn" bindtap="{{M}}">确定</text></view></view></view></view><button class="complete-button" bindtap="{{N}}">完成</button><scroll-view class="categories-container" scroll-y bounces="{{false}}" enhanced="{{true}}" show-scrollbar="{{false}}"><view wx:for="{{O}}" wx:for-item="categoryGroup" wx:key="e" class="category-group" hidden="{{!categoryGroup.f}}"><view class="group-header"><text class="group-title">{{categoryGroup.a}}</text><view wx:if="{{categoryGroup.b}}" class="group-actions"><view class="lucky-button" bindtap="{{categoryGroup.c}}"><text class="lucky-text">试试手气</text><text class="lucky-icon">🎲</text></view></view></view><view class="categories"><view wx:for="{{categoryGroup.d}}" wx:for-item="category" wx:key="c" class="{{['category-item', category.d && 'active']}}" bindtap="{{category.e}}"><text class="emoji-icon">{{category.a}}</text><text class="label">{{category.b}}</text></view></view></view></scroll-view></view></view>