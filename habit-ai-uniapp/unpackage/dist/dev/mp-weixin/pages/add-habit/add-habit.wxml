<view class="container"><view wx:if="{{a}}" class="step"><text class="title">为你的习惯起个名字</text><input class="habit-input" type="text" maxlength="20" placeholder="设定一个可执行的习惯，例如：每天写1000字论文。（习惯需要明确且可量化，这样才能有效执行）" value="{{b}}" bindinput="{{c}}"/><view class="input-footer"><text class="counter">{{d}}/20</text></view><block wx:if="{{r0}}"><textarea class="habit-input flag-input" maxlength="100" placeholder="描述你的目标，例如：3.10号预答辩，需要完成完整论文。在这之前每天需要1000字论文，最后还要用一周的时间做Slides。（目标尽可能详细，AI会据此了解你，从而更好帮助你）" value="{{e}}" bindinput="{{f}}"/></block><view class="input-footer"><text class="counter">{{g}}/100</text></view><view class="target-date"><text class="target-title">目标完成时间</text><picker mode="date" value="{{j}}" start="{{k}}" bindchange="{{l}}" class="date-picker"><view class="date-display"><text class="date">{{h}}</text><text class="days-left">(还有 {{i}} 天)</text></view></picker></view><view class="reminder-times"><text class="reminder-title">设置提醒时间</text><view class="reminder-list"><view wx:for="{{m}}" wx:for-item="time" wx:key="f" class="reminder-item"><picker mode="time" value="{{time.c}}" bindchange="{{time.d}}" class="time-picker"><view class="time-display"><text class="time">{{time.a}}</text><text class="period">{{time.b}}</text></view></picker><text class="delete-time" bindtap="{{time.e}}">×</text></view></view><view wx:if="{{n}}" class="add-time" bindtap="{{o}}"><text class="add-icon">+</text><text class="add-text">添加提醒时间</text></view></view><button class="next-button" bindtap="{{p}}">下一步</button></view><view wx:if="{{q}}" class="step step-category"><view class="step-header"><view class="back-button" bindtap="{{r}}"><text class="back-arrow">←</text></view><text class="habit-name">为"{{s}}"</text></view><text class="title">选择一个习惯类别</text><view class="search-row"><input class="search-input" type="text" placeholder="搜索习惯" confirm-type="search" value="{{t}}" bindinput="{{v}}"/><view class="icon-settings" bindtap="{{y}}"><view class="icon-preview" style="{{'background-color:' + x}}"><text class="emoji">{{w}}</text></view><text class="settings-tip">自定义</text></view></view><text class="emoji-tip">已根据习惯名称自动匹配图标：{{z}}</text><view wx:if="{{A}}" class="settings-modal"><view class="modal-content"><view class="settings-preview"><view class="preview-box" style="{{'background-color:' + C}}"><text class="preview-emoji">{{B}}</text></view></view><view class="settings-section"><text class="section-title">自定义图标</text><block wx:if="{{r0}}"><textarea class="emoji-input" maxlength="4" placeholder="请输入emoji表情" bindinput="{{D}}" value="{{E}}"/></block></view><view class="settings-section"><text class="section-title">自定义颜色</text><view class="color-input-row"><input class="color-input" type="text" placeholder="#RRGGBB" bindinput="{{F}}" value="{{G}}"/><view class="custom-color-preview" style="{{'background-color:' + H}}"/></view></view><view class="settings-section"><view class="preset-colors"><view wx:for="{{I}}" wx:for-item="color" wx:key="c" class="{{['color-item', color.d && 'active']}}" bindtap="{{color.e}}"><view class="color-preview" style="{{'background-color:' + color.a}}"/><text class="color-name">{{color.b}}</text></view></view></view><view class="modal-footer"><view class="modal-buttons"><text class="reset-btn" bindtap="{{J}}">重置</text><text class="cancel-btn" bindtap="{{K}}">取消</text><text class="save-btn" bindtap="{{L}}">确定</text></view></view></view></view><button class="complete-button" bindtap="{{M}}">完成</button><scroll-view class="categories-container" scroll-y bounces="{{false}}" enhanced="{{true}}" show-scrollbar="{{false}}"><view wx:for="{{N}}" wx:for-item="categoryGroup" wx:key="e" class="category-group" hidden="{{!categoryGroup.f}}"><view class="group-header"><text class="group-title">{{categoryGroup.a}}</text><view wx:if="{{categoryGroup.b}}" class="group-actions"><view class="lucky-button" bindtap="{{categoryGroup.c}}"><text class="lucky-text">试试手气</text><text class="lucky-icon">🎲</text></view></view></view><view class="categories"><view wx:for="{{categoryGroup.d}}" wx:for-item="category" wx:key="c" class="{{['category-item', category.d && 'active']}}" bindtap="{{category.e}}"><text class="emoji-icon">{{category.a}}</text><text class="label">{{category.b}}</text></view></view></view></scroll-view></view><view wx:if="{{O}}" class="step"><text class="title">设置每日提醒时间</text><text class="subtitle">通过每日提醒，保持你的习惯不间断。</text><view class="time-picker"><picker mode="time" value="{{R}}" bindchange="{{S}}"><view class="time-display"><text class="time">{{P}}</text><text class="period">{{Q}}</text></view></picker></view><button class="save-button" bindtap="{{T}}">保存提醒</button><text class="skip-link" bindtap="{{U}}">稍后再说</text></view></view>