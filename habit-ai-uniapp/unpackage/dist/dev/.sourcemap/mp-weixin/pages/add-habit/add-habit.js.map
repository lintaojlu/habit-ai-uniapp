{"version":3,"file":"add-habit.js","sources":["pages/add-habit/add-habit.vue","pages/add-habit/add-habit.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 第一步：习惯名称和目标 -->\n    <view class=\"step\" v-if=\"currentStep === 1\">\n      <text class=\"title\">建立一个习惯/任务</text>\n      <input\n          class=\"habit-input\"\n          type=\"text\"\n          v-model=\"habitName\"\n          maxlength=\"20\"\n          placeholder=\"例如：保持运动。从简单做起更易坚持！\"\n      />\n      <view class=\"input-footer\">\n        <text class=\"counter\">{{ habitName.length }}/20</text>\n\n      </view>\n      <textarea\n          class=\"habit-input flag-input\"\n          v-model=\"habitFlag\"\n          maxlength=\"100\"\n          placeholder=\"量化你的目标，例如：减重10公斤，获得马甲线！{{\\n}}目标尽可能详细，AI需要数据才能了解你哦～🫰\"\n      />\n      <view class=\"input-footer\">\n        <text class=\"counter\">{{ habitFlag.length }}/100</text>\n      </view>\n\n      <!-- 目标完成时间 -->\n      <view class=\"target-date\">\n        <text class=\"target-title\">目标完成时间</text>\n        <picker\n            mode=\"date\"\n            :value=\"targetDate\"\n            :start=\"today\"\n            @change=\"onTargetDateChange\"\n            class=\"date-picker\"\n        >\n          <view class=\"date-display\">\n            <text class=\"date\">{{ formatTargetDate }}</text>\n            <text class=\"days-left\">(还有 {{ daysLeft }} 天)</text>\n          </view>\n        </picker>\n      </view>\n      \n\n      <!-- 提醒时间选择 -->\n      <view class=\"reminder-times\">\n        <text class=\"reminder-title\">设置提醒时间</text>\n        <view class=\"reminder-list\">\n          <view v-for=\"(time, index) in reminderTimes\" :key=\"index\" class=\"reminder-item\">\n            <picker\n              mode=\"time\"\n              :value=\"time\"\n              @change=\"(e) => onTimeChange(e, index)\"\n              class=\"time-picker\"\n            >\n              <view class=\"time-display\">\n                <text class=\"time\">{{ time }}</text>\n                <text class=\"period\">{{ getTimePeriod(time) }}</text>\n              </view>\n            </picker>\n            <text class=\"delete-time\" @tap=\"deleteTime(index)\">×</text>\n          </view>\n        </view>\n        <view class=\"add-time\" @tap=\"addTime\" v-if=\"reminderTimes.length < 5\">\n          <text class=\"add-icon\">+</text>\n          <text class=\"add-text\">添加提醒时间</text>\n        </view>\n      </view>\n\n      <button class=\"next-button\" @tap=\"nextStep\">下一步</button>\n\n\n    </view>\n\n    <!-- 第二步：选择类别 -->\n    <view class=\"step step-category\" v-if=\"currentStep === 2\">\n      <view class=\"step-header\">\n        <view class=\"back-button\" @tap=\"currentStep = 1\">\n          <text class=\"back-arrow\">←</text>\n        </view>\n        <text class=\"habit-name\">为\"{{ habitName }}\"</text>\n      </view>\n      <text class=\"title\">选择一个图标</text>\n      <view class=\"search-row\">\n        <input\n            class=\"search-input\"\n            type=\"text\"\n            v-model=\"searchQuery\"\n            placeholder=\"搜索习惯\"\n            confirm-type=\"search\"\n        />\n        <view class=\"icon-settings\" @tap=\"showIconSettings\">\n          <view class=\"icon-preview\"\n                :style=\"{ backgroundColor: selectedColor === '$theme-color' ? themeColorHex : selectedColor }\">\n            <text class=\"emoji\">{{ displayEmoji }}</text>\n          </view>\n          <text class=\"settings-tip\">自定义</text>\n        </view>\n      </view>\n      <text class=\"emoji-tip\">已根据习惯名称自动匹配图标：{{ matchedEmoji }}</text>\n\n      <!-- 设置弹窗 -->\n      <view class=\"settings-modal\" v-if=\"showSettingsModal\">\n        <view class=\"modal-content\">\n          <view class=\"settings-preview\">\n            <view class=\"preview-box\"\n                  :style=\"{ backgroundColor: selectedColor === '$theme-color' ? themeColorHex : selectedColor }\">\n              <text class=\"preview-emoji\">{{ isValidEmoji(customEmoji) ? customEmoji : displayEmoji }}</text>\n            </view>\n          </view>\n          <view class=\"settings-section\">\n            <text class=\"section-title\">自定义图标</text>\n            <textarea\n                class=\"emoji-input\"\n                v-model=\"customEmoji\"\n                maxlength=\"4\"\n                placeholder=\"请输入emoji表情\"\n                @input=\"checkEmojiInput\"\n            />\n          </view>\n          <view class=\"settings-section\">\n            <text class=\"section-title\">自定义颜色</text>\n            <view class=\"color-input-row\">\n              <input\n                  class=\"color-input\"\n                  type=\"text\"\n                  v-model=\"customColor\"\n                  placeholder=\"#RRGGBB\"\n                  @input=\"validateColorInput\"\n              />\n              <view\n                  class=\"custom-color-preview\"\n                  :style=\"{ backgroundColor: isValidColor(customColor) ? customColor : (selectedColor === '$theme-color' ? themeColorHex : '#CCCCCC') }\"\n              />\n            </view>\n          </view>\n          <view class=\"settings-section\">\n            <view class=\"preset-colors\">\n              <view\n                  v-for=\"(color, index) in presetColors\"\n                  :key=\"index\"\n                  class=\"color-item\"\n                  :class=\"{ active: selectedColor === color.value }\"\n                  @tap=\"selectColor(color.value)\"\n              >\n                <view class=\"color-preview\" :style=\"{ backgroundColor: color.value }\"/>\n                <text class=\"color-name\">{{ color.name }}</text>\n              </view>\n            </view>\n          </view>\n          <view class=\"modal-footer\">\n            <view class=\"modal-buttons\">\n              <text class=\"reset-btn\" @tap=\"resetSettings\">重置</text>\n              <text class=\"cancel-btn\" @tap=\"showSettingsModal = false\">取消</text>\n              <text class=\"save-btn\" @tap=\"saveSettings\">确定</text>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <button class=\"complete-button\" @tap=\"completeHabitSetup\">完成</button>\n\n      <scroll-view\n          class=\"categories-container\"\n          scroll-y\n          :bounces=\"false\"\n          :enhanced=\"true\"\n          :show-scrollbar=\"false\"\n      >\n        <view\n            v-for=\"(categoryGroup, groupIndex) in filteredCategories\"\n            :key=\"groupIndex\"\n            class=\"category-group\"\n            v-show=\"categoryGroup.items.length > 0\"\n        >\n          <view class=\"group-header\">\n            <text class=\"group-title\">{{ categoryGroup.group }}</text>\n            <view class=\"group-actions\" v-if=\"groupIndex === 0\">\n              <view class=\"lucky-button\" @tap=\"tryLuckyEmoji\">\n                <text class=\"lucky-text\">试试手气</text>\n                <text class=\"lucky-icon\">🎲</text>\n              </view>\n            </view>\n          </view>\n          <view class=\"categories\">\n            <view\n                v-for=\"(category, index) in categoryGroup.items\"\n                :key=\"index\"\n                class=\"category-item\"\n                :class=\"{ active: category.icon === displayEmoji }\"\n                @tap=\"selectCategory(category.value)\"\n            >\n              <text class=\"emoji-icon\">{{ category.icon }}</text>\n              <text class=\"label\">{{ category.label }}</text>\n            </view>\n          </view>\n        </view>\n      </scroll-view>\n    </view>\n    \n  </view>\n</template>\n\n<script>\nimport { apiService } from '@/utils/api.js'  // 添加这行导入语句\n\nexport default {\n  data() {\n    const today = new Date()\n    const defaultTarget = new Date()\n    defaultTarget.setDate(today.getDate() + 21) // 默认21天后\n    return {\n      today: this.formatDate(today),\n      targetDate: this.formatDate(defaultTarget),\n      currentStep: 1,\n      habitName: '',\n      habitFlag: '',\n      selectedCategory: '',\n      currentCategoryGroup: 0,\n      reminderTime: '12:00',\n      reminderTimes: ['12:00'],\n      searchQuery: '',\n      emojiMappings: {\n        '运动|跑步|跑|步行|走|散步|健身': '🏃',\n        '瑜伽|拉伸|柔韧|柔软': '🧘',\n        '饮食|吃|食物|营养|餐': '🥗',\n        '水|喝水|饮水': '💧',\n        '睡觉|睡眠|休息': '😴',\n        '冥想|放松|专注': '🧘',\n        '体育|球|篮球|足球|羽毛球': '⚽',\n        '读书|阅读|看书': '📚',\n        '编程|代码|程序': '💻',\n        '学习|课程|上课|听课': '📝',\n        '写作|写|记录': '✍️',\n        '笔记|记|背诵': '📔',\n        '整理|收拾|打扫|清洁': '🧹',\n        '做饭|烹饪|厨艺': '🍳',\n        '理财|存钱|投资|财务': '💰',\n        '植物|花|草|园艺': '🌱',\n        '音乐|乐器|吉他|钢琴': '🎸',\n        '绘画|画画|涂鸦|素描': '🎨',\n        '手工|制作|创作': '🎭',\n        '摄影|拍照|照片': '📸',\n        '唱歌|歌唱|声乐': '🎤',\n        '游戏|玩': '🎮',\n        '时间|管理|规划': '⏰',\n        '目标|计划|安排': '📊',\n        '情绪|心情|感受': '🌈',\n        '社交|交友|聊天|沟通': '👥',\n        default: '✨'\n      },\n      categories: [\n        {\n          group: '随便选个',\n          items: [\n            {label: '闪亮', value: 'sparkle', icon: '✨'},\n            {label: '星星', value: 'star', icon: '⭐'},\n            {label: '爱心', value: 'heart', icon: '❤️'},\n            {label: '彩虹', value: 'rainbow', icon: '🌈'},\n            {label: '火焰', value: 'fire', icon: '🔥'},\n            {label: '烟花', value: 'firework', icon: '🎆'},\n            {label: '小花', value: 'flower', icon: '🌸'},\n            {label: '太阳', value: 'sun', icon: '☀️'},\n            {label: '月亮', value: 'moon', icon: '🌙'},\n            {label: '笑脸', value: 'smile', icon: '😊'},\n            {label: '皇冠', value: 'crown', icon: '👑'},\n            {label: '钻石', value: 'diamond', icon: '💎'}\n          ]\n        },\n        {\n          group: '健康',\n          items: [\n            {label: '户外活动', value: 'workout', icon: '🏃'},\n            {label: '健康饮食', value: 'diet', icon: '🥗'},\n            {label: '喝水', value: 'water', icon: '💧'},\n            {label: '早睡早起', value: 'sleep', icon: '😴'},\n            {label: '瑜伽冥想', value: 'meditation', icon: '🧘'},\n            {label: '体育运动', value: 'running', icon: '⚽'}\n          ]\n        },\n        {\n          group: '学习',\n          items: [\n            {label: '阅读', value: 'reading', icon: '📚'},\n            {label: '编程', value: 'coding', icon: '💻'},\n            {label: '上课程', value: 'course', icon: '📝'}\n          ]\n        },\n        {\n          group: '生活',\n          items: [\n            {label: '整理房间', value: 'cleaning', icon: '🧹'},\n            {label: '做饭', value: 'cooking', icon: '🍳'},\n            {label: '理财', value: 'finance', icon: '💰'},\n            {label: '养护植物', value: 'plants', icon: '🌱'}\n          ]\n        },\n        {\n          group: '兴趣',\n          items: [\n            {label: '练乐器', value: 'music', icon: '🎸'},\n            {label: '绘画', value: 'art', icon: '🎨'},\n            {label: '手工', value: 'craft', icon: '🎭'},\n            {label: '摄影', value: 'photo', icon: '📸'},\n            {label: '唱歌', value: 'singing', icon: '🎤'},\n            {label: '游戏', value: 'game', icon: '🎮'}\n          ]\n        },\n        {\n          group: '成长',\n          items: [\n            {label: '时间管理', value: 'time', icon: '⏰'},\n            {label: '目标规划', value: 'planning', icon: '📊'},\n            {label: '情绪记录', value: 'mood', icon: '🌈'},\n            {label: '社交', value: 'social', icon: '👥'}\n          ]\n        }\n      ],\n      isEdit: false,\n      habit_id: null,\n      touchStartX: 0,\n      touchStartY: 0,\n\n      matchedEmoji: '✨',\n      selectedEmoji: '',\n      showEmojiInput: false,\n      customEmoji: '',\n      showEmojiModal: false,\n      showSettingsModal: false,\n      selectedColor: '$theme-color',\n      customColor: '',\n      presetColors: [\n        {name: '薄荷绿', value: '#98D8C6'},\n        {name: '天空蓝', value: '#A5DEF1'},\n        {name: '淡紫色', value: '#D4BFEA'},\n        {name: '珊瑚粉', value: '#FFB5B5'},\n        {name: '柔黄色', value: '#FFE5B4'},\n        {name: '薰衣草', value: '#E6E6FA'},\n        {name: '浅青色', value: '#B4E6E6'},\n        {name: '粉桃色', value: '#FFD1DC'},\n        {name: '奶咖色', value: '#D4C4B7'},\n        {name: '浅灰蓝', value: '#B8C5D6'},\n        {name: '清新绿', value: '#C1E1C1'},\n        {name: '温柔粉', value: '#FAD3E7'}\n      ],\n      themeColorHex: 'var(--theme-color)'\n    }\n  },\n\n  computed: {\n    formatTargetDate() {\n      const date = new Date(this.targetDate)\n      return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`\n    },\n    \n    daysLeft() {\n      const target = new Date(this.targetDate)\n      const today = new Date()\n      today.setHours(0, 0, 0, 0)\n      target.setHours(0, 0, 0, 0)\n      return Math.ceil((target - today) / (1000 * 60 * 60 * 24))\n    },\n    timePeriod() {\n      const hour = parseInt(this.reminderTime.split(':')[0])\n      return hour >= 12 ? 'PM' : 'AM'\n    },\n\n    filteredCategories() {\n      if (!this.searchQuery) return this.categories\n      const query = this.searchQuery.toLowerCase()\n      return this.categories.map(group => ({\n        group: group.group,\n        items: group.items.filter(item =>\n            item.label.toLowerCase().includes(query) ||\n            item.value.toLowerCase().includes(query)\n        )\n      }))\n    },\n\n    displayEmoji() {\n      return this.selectedEmoji || this.matchedEmoji\n    }\n  },\n\n  onLoad(options) {\n    this.habitName = ''\n    this.selectedEmoji = ''\n\n    if (options && options.habit_id) {\n      this.isEdit = true\n      this.habit_id = options.habit_id\n      this.loadHabitData()\n    } else {\n      this.isEdit = false\n      this.habit_id = null\n    }\n\n    uni.setNavigationBarTitle({\n      title: this.isEdit ? '编辑习惯' : '添加习惯'\n    })\n  },\n\n  methods: {\n    formatDate(date) {\n      const year = date.getFullYear()\n      const month = String(date.getMonth() + 1).padStart(2, '0')\n      const day = String(date.getDate()).padStart(2, '0')\n      return `${year}-${month}-${day}`\n    },\n\n    onTargetDateChange(e) {\n      this.targetDate = e.detail.value\n    },\n    getTimePeriod(time) {\n      const hour = parseInt(time.split(':')[0])\n      return hour >= 12 ? '下午' : '上午'\n    },\n\n    onTimeChange(e, index) {\n      const times = [...this.reminderTimes]\n      times[index] = e.detail.value\n      this.reminderTimes = times\n    },\n\n    addTime() {\n      if (this.reminderTimes.length < 5) {\n        this.reminderTimes.push('12:00')\n      }\n    },\n\n    deleteTime(index) {\n      this.reminderTimes.splice(index, 1)\n    },\n\n    nextStep() {\n      if (this.currentStep === 1 && !this.habitName.trim()) {\n        uni.showToast({\n          title: '请输入习惯名称',\n          icon: 'none'\n        })\n        return\n      }\n      if (this.isEdit && this.currentStep === 1) {\n        this.currentStep = 2\n        return\n      }\n      if (this.currentStep < 3) {\n        this.currentStep++\n      }\n    },\n\n    selectCategory(category) {\n      if (this.selectedCategory === category) {\n        this.selectedCategory = ''\n        this.selectedEmoji = ''\n      } else {\n        this.selectedCategory = category\n        const categoryItem = this.categories\n            .flatMap(group => group.items)\n            .find(item => item.value === category)\n        if (categoryItem) {\n          this.selectedEmoji = categoryItem.icon\n        }\n      }\n    },\n\n    async loadHabitData() {\n      const habits = uni.getStorageSync('habits') || []\n      const habit = habits.find(h => h.habit_id === this.habit_id)\n\n      if (habit) {\n        this.habitName = habit.title\n        this.habitFlag = habit.description || ''\n        this.selectedCategory = habit.category\n        this.reminderTimes = habit.alert_time?.time || ['12:00']\n        this.targetDate = habit.deadline ? new Date(habit.deadline).toISOString().split('T')[0] : this.targetDate\n        \n        if (habit.icon) {\n          this.selectedEmoji = habit.icon\n          this.matchedEmoji = habit.icon\n        } else {\n          this.matchedEmoji = this.matchHabitEmoji(habit.title)\n        }\n        \n        this.selectedColor = habit.color || '#fff'\n      } else {\n        console.error('Failed to find habit in storage:', {\n          searchId: this.habit_id,\n          availableHabits: habits.map(h => ({\n            habit_id: h.habit_id,\n            title: h.title\n          }))\n        })\n        uni.showToast({\n          title: '未找到习惯数据',\n          icon: 'none'\n        })\n        setTimeout(() => {\n          uni.navigateBack()\n        }, 1500)\n      }\n    },\n\n    handleSwiperChange: function handleSwiperChange(e) {\n      this.currentCategoryGroup = e.detail.current;\n    },\n    handleContainerTouchStart: function handleContainerTouchStart(e) {\n      if (this.currentStep === 2) {\n        this.touchStartX = e.touches[0].clientX;\n        this.touchStartY = e.touches[0].clientY;\n      }\n    },\n    handleContainerTouchEnd: function handleContainerTouchEnd(e) {\n      if (this.currentStep === 2) {\n        var touchEndX = e.changedTouches[0].clientX;\n        var touchEndY = e.changedTouches[0].clientY;\n        var minSwipeDistance = 50;\n        var deltaX = touchEndX - this.touchStartX;\n        var deltaY = touchEndY - this.touchStartY;\n        if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > minSwipeDistance) {\n          if (deltaX > 0 && this.currentCategoryGroup > 0) {\n            this.currentCategoryGroup--;\n          } else if (deltaX < 0 && this.currentCategoryGroup < this.categories.length - 1) {\n            this.currentCategoryGroup++;\n          }\n        }\n      }\n    },\n    matchHabitEmoji: function matchHabitEmoji(habitName) {\n      const text = habitName.toLowerCase();\n      const entries = Object.entries(this.emojiMappings);\n\n      for (let i = 0; i < entries.length; i++) {\n        const [keywords, emoji] = entries[i];\n        const keywordArray = keywords.split('|');\n\n        if (keywordArray.some(keyword => text.includes(keyword))) {\n          return emoji;\n        }\n      }\n\n      return this.emojiMappings.default;\n    },\n\n    watchHabitNameChange: function watchHabitNameChange() {\n      if (!this.selectedEmoji) {\n        this.matchedEmoji = this.matchHabitEmoji(this.habitName);\n      }\n    },\n    async completeHabitSetup() {\n      if (!this.habitName.trim()) {\n        uni.showToast({\n          title: \"请输入习惯名称\",\n          icon: \"none\"\n        });\n        return;\n      }\n\n      try {\n        const habitData = {\n          habit_id: this.habit_id || null,\n          title: this.habitName.trim(),\n          description: this.habitFlag.trim(),\n          alert_time: {\n            days: [0, 1, 2, 3, 4, 5, 6], // 默认每天\n            time: this.reminderTimes\n          },\n          deadline: this.targetDate ? new Date(this.targetDate).toISOString() : null,\n          icon: this.displayEmoji,\n          color: this.selectedColor,\n          category: this.selectedCategory || \"custom\",\n          order: 0 // 新习惯默认添加到最后\n        };\n\n        // 只在创建新习惯时添加这些字段\n        if (!this.isEdit) {\n          habitData.completed = [];\n          habitData.streak = {\n            current: 0,\n            longest: 0,\n            longest_start: null,\n            longest_end: null\n          };\n          habitData.is_archived = false;\n        }\n\n        let res;\n        if (this.isEdit) {\n          res = await apiService.updateHabit(this.habit_id, habitData);\n        } else {\n          res = await apiService.createHabit(habitData);\n        }\n\n        if (res.status === 'success') {\n          // API 调用成功，更新本地存储\n          const habits = uni.getStorageSync('habits') || [];\n\n          if (this.isEdit) {\n            const index = habits.findIndex(h => h.habit_id === this.habit_id);\n            if (index !== -1) {\n              habits[index] = {\n                ...habits[index],\n                ...habitData\n              };\n              console.log(\"Updated habit:\", habits[index]);\n            }\n          } else {\n            habitData.habit_id = res.data.habit_id;\n            habits.push(habitData);\n          }\n\n          uni.setStorageSync(\"habits\", habits);\n          uni.showToast({\n            title: this.isEdit ? \"保存成功\" : \"添加成功\",\n            icon: \"success\",\n            duration: 500\n          });\n          \n          setTimeout(() => {\n            uni.navigateBack();\n          }, 500);\n        } else {\n          throw new Error(res.message || '保存失败');\n        }\n      } catch (error) {\n        console.error(\"Failed to save habit:\", error);\n        uni.showToast({\n          title: error.message || \"保存失败，请重试\",\n          icon: \"none\"\n        });\n      }\n    },\n    resetEmojiSelection: function resetEmojiSelection() {\n      this.selectedEmoji = \"\";\n      this.matchedEmoji = this.matchHabitEmoji(this.habitName);\n    },\n    tryLuckyEmoji: function tryLuckyEmoji() {\n      const decorativeEmojis = this.categories[0].items;\n      const randomIndex = Math.floor(Math.random() * decorativeEmojis.length);\n      const luckyEmoji = decorativeEmojis[randomIndex];\n      this.selectedCategory = luckyEmoji.value;\n      this.selectedEmoji = luckyEmoji.icon;\n\n      const duration = 1000;\n      const steps = 10;\n      const interval = duration / steps;\n      let count = 0;\n\n      const animate = () => {\n        if (count < steps) {\n          const randomEmoji = decorativeEmojis[Math.floor(Math.random() * decorativeEmojis.length)];\n          this.selectedEmoji = randomEmoji.icon;\n          count++;\n          setTimeout(animate, interval);\n        } else {\n          this.selectedEmoji = luckyEmoji.icon;\n          uni.showToast({\n            title: \"手气不错！\",\n            icon: \"none\",\n            duration: 1000\n          });\n        }\n      };\n      animate();\n    },\n    showCustomEmojiInput: function showCustomEmojiInput() {\n      this.customEmoji = \"\";\n      this.showEmojiModal = true;\n    },\n    checkEmojiInput: function checkEmojiInput() {\n      const emojiCount = Array.from(this.customEmoji).filter(char => {\n        const code = char.codePointAt(0);\n        return (code >= 127744 && code <= 129535) || // Miscellaneous Symbols and Pictographs\n            (code >= 9728 && code <= 9983) ||     // Miscellaneous Symbols\n            (code >= 9984 && code <= 10175) ||    // Dingbats\n            (code >= 65024 && code <= 65039) ||   // Variation Selectors\n            (code >= 129280 && code <= 129535) || // Supplemental Symbols and Pictographs\n            (code >= 128512 && code <= 128591);   // Emoticons\n      }).length;\n\n      if (emojiCount > 1) {\n        const firstEmoji = Array.from(this.customEmoji).find(char => {\n          const code = char.codePointAt(0);\n          return (code >= 127744 && code <= 129535) ||\n              (code >= 9728 && code <= 9983) ||\n              (code >= 9984 && code <= 10175) ||\n              (code >= 65024 && code <= 65039) ||\n              (code >= 129280 && code <= 129535) ||\n              (code >= 128512 && code <= 128591);\n        });\n        this.customEmoji = firstEmoji || \"\";\n        uni.showToast({\n          title: \"只能输入一个emoji\",\n          icon: \"none\"\n        });\n      }\n    },\n    saveCustomEmoji: function saveCustomEmoji() {\n      if (!this.customEmoji) {\n        uni.showToast({\n          title: \"请输入表情\",\n          icon: \"none\"\n        });\n        return;\n      }\n\n      const isEmoji = Array.from(this.customEmoji).some(char => {\n        const code = char.codePointAt(0);\n        return (code >= 127744 && code <= 129535) ||\n            (code >= 9728 && code <= 9983) ||\n            (code >= 9984 && code <= 10175) ||\n            (code >= 65024 && code <= 65039) ||\n            (code >= 129280 && code <= 129535) ||\n            (code >= 128512 && code <= 128591);\n      });\n\n      if (isEmoji) {\n        this.selectedEmoji = this.customEmoji;\n        this.showEmojiModal = false;\n      } else {\n        uni.showToast({\n          title: \"请输入有效的emoji表情\",\n          icon: \"none\"\n        });\n      }\n    },\n    showIconSettings: function showIconSettings() {\n      this.showSettingsModal = true;\n      this.customColor = this.selectedColor === \"$theme-color\" ? this.themeColorHex : this.selectedColor;\n      this.customEmoji = this.selectedEmoji || \"\";\n    },\n    validateColorInput: function validateColorInput() {\n      this.customColor = this.customColor.replace(/\\s/g, \"\");\n      if (this.customColor && !this.customColor.startsWith(\"#\")) {\n        this.customColor = \"#\" + this.customColor;\n      }\n      if (this.customColor.length > 7) {\n        this.customColor = this.customColor.slice(0, 7);\n      }\n    },\n    isValidColor: function isValidColor(color) {\n      if (color === \"$theme-color\") return true;\n      return /^#[0-9A-Fa-f]{6}$/.test(color);\n    },\n    selectColor: function selectColor(color) {\n      this.selectedColor = color;\n      this.customColor = color;\n    },\n    resetSettings: function resetSettings() {\n      this.selectedColor = \"$theme-color\";\n      this.customColor = this.themeColorHex;\n      this.selectedEmoji = \"\";\n      this.customEmoji = \"\";\n      this.matchedEmoji = this.matchHabitEmoji(this.habitName);\n    },\n    saveSettings: function saveSettings() {\n      if (this.customColor && this.isValidColor(this.customColor)) {\n        this.selectedColor = this.customColor === this.themeColorHex ? \"$theme-color\" : this.customColor;\n      }\n      if (this.customEmoji) {\n        const isEmoji = Array.from(this.customEmoji).some(char => {\n          const code = char.codePointAt(0);\n          return (code >= 127744 && code <= 129535) ||\n              (code >= 9728 && code <= 9983) ||\n              (code >= 9984 && code <= 10175) ||\n              (code >= 65024 && code <= 65039) ||\n              (code >= 129280 && code <= 129535) ||\n              (code >= 128512 && code <= 128591);\n        });\n        if (isEmoji) {\n          this.selectedEmoji = this.customEmoji;\n        }\n      }\n      this.showSettingsModal = false;\n    },\n    isValidEmoji: function isValidEmoji(char) {\n      if (!char) return false;\n      return Array.from(char).some(char2 => {\n        const code = char2.codePointAt(0);\n        return (code >= 127744 && code <= 129535) || // Miscellaneous Symbols and Pictographs\n            (code >= 9728 && code <= 9983) ||     // Miscellaneous Symbols\n            (code >= 9984 && code <= 10175) ||    // Dingbats\n            (code >= 65024 && code <= 65039) ||   // Variation Selectors\n            (code >= 129280 && code <= 129535) || // Supplemental Symbols and Pictographs\n            (code >= 128512 && code <= 128591);   // Emoticons\n      });\n    }\n  },\n  watch: {\n    habitName: {\n      handler: \"watchHabitNameChange\",\n      immediate: true\n    }\n  }\n};\n</script>\n\n<style>\n.reminder-times {\n  margin: 20rpx 0;\n}\n\n.reminder-title {\n  font-size: 28rpx;\n  color: #666;\n  margin-bottom: 20rpx;\n}\n\n.reminder-list {\n  display: flex;\n  flex-direction: column;\n  gap: 20rpx;\n}\n\n.reminder-item {\n  display: flex;\n  align-items: center;\n  background-color: #f8f8f8;\n  padding: 20rpx;\n  border-radius: 12rpx;\n}\n\n.time-picker {\n  flex: 1;\n}\n\n.time-display {\n  display: flex;\n  align-items: center;\n  gap: 10rpx;\n}\n\n.time {\n  font-size: 32rpx;\n  color: #333;\n}\n\n.period {\n  font-size: 24rpx;\n  color: #666;\n}\n\n.delete-time {\n  font-size: 40rpx;\n  color: #999;\n  padding: 0 20rpx;\n}\n\n.add-time {\n  display: flex;\n  align-items: center;\n  gap: 10rpx;\n  margin-top: 20rpx;\n  padding: 20rpx;\n  background-color: #f8f8f8;\n  border-radius: 12rpx;\n}\n\n.add-icon {\n  font-size: 32rpx;\n  color: #666;\n}\n\n.add-text {\n  font-size: 28rpx;\n  color: #666;\n}\n\n.container {\n  background-color: #fff;\n  color: #2c3e50;\n  height: 100vh;\n  padding: 20rpx 40rpx;\n}\n\n.container, .step {\n  box-sizing: border-box;\n  overflow: hidden;\n}\n\n.step {\n  align-items: stretch;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  padding-top: 40rpx;\n  position: relative;\n  width: 100%;\n}\n\n.title {\n  font-size: 48rpx;\n  font-weight: 600;\n  margin-bottom: 40rpx;\n}\n\n.subtitle, .title {\n  text-align: center;\n}\n\n.subtitle {\n  color: #5c6b7a;\n  font-size: 28rpx;\n  margin-bottom: 60rpx;\n}\n\n.habit-input {\n  background: #f5f7fa;\n  font-size: 28rpx;\n  border-radius: 20rpx;\n  box-sizing: border-box;\n  color: #2c3e50;\n  height: 100rpx;\n  margin-top: 20rpx;\n  padding: 0 30rpx;\n  width: 100%;\n}\n\n.flag-input {\n  background: #edf0f5;\n  font-size: 28rpx;\n  margin: 20rpx 0;\n  height: 200rpx !important; /* 增加高度 */\n  padding: 20rpx 30rpx !important;\n  line-height: 1.5;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.next-button {\n  align-items: center;\n  background: var(--theme-color);\n  border-radius: 20rpx;\n  bottom: 30rpx;\n  box-shadow: 0 0 15rpx rgba(255, 159, 10, .15);\n  color: #fff;\n  display: flex;\n  font-size: 32rpx;\n  height: 100rpx;\n  justify-content: center;\n  left: 0;\n  margin: 30rpx auto;\n  position: absolute;\n  width: 100%;\n  z-index: 10;\n}\n\n.next-button:active {\n  opacity: .9;\n}\n\n.category-tabs {\n  margin: 20rpx 0 30rpx;\n  overflow: hidden;\n  position: relative;\n  width: 100%;\n}\n\n.category-tabs .tabs-content {\n  display: flex;\n  gap: 20rpx;\n  padding: 0 20rpx;\n  position: relative;\n  transition: transform .3s ease;\n  transition: transform .3s ease, -webkit-transform .3s ease;\n  white-space: nowrap;\n}\n\n.category-tabs .tabs-content.group-0 {\n  transform: translateX(calc(50vw - 120rpx));\n}\n\n.category-tabs .tabs-content.group-1 {\n  transform: translateX(calc(50vw - 340rpx));\n}\n\n.category-tabs .tabs-content.group-2 {\n  transform: translateX(calc(50vw - 560rpx));\n}\n\n.category-tabs .tabs-content.group-3 {\n  transform: translateX(calc(50vw - 780rpx));\n}\n\n.category-tabs .tabs-content.group-4 {\n  transform: translateX(calc(50vw - 1000rpx));\n}\n\n.category-tabs .tab-item {\n  background: #edf0f5;\n  border-radius: 40rpx;\n  flex-shrink: 0;\n  font-size: 28rpx;\n  padding: 20rpx 40rpx;\n  text-align: center;\n  transition: all .3s ease;\n  white-space: nowrap;\n}\n\n.category-tabs .tab-item.active {\n  background: var(--theme-color);\n  box-shadow: 0 0 15rpx rgba(255, 159, 10, .15);\n  color: #fff;\n  transform: scale(1.1);\n}\n\n.categories-container {\n  -webkit-overflow-scrolling: touch;\n  bottom: 160rpx;\n  left: 0;\n  overflow-y: auto;\n  position: absolute;\n  right: 0;\n  top: 460rpx;\n}\n\n.categories-container::-webkit-scrollbar {\n  display: none;\n  height: 0;\n  width: 0;\n}\n\n.category-group:first-child .group-header .group-title {\n  display: none;\n}\n\n.category-group:first-child .group-header .group-actions {\n  width: 100%;\n}\n\n.group-header .group-actions .lucky-button .lucky-text {\n  font-size: 26rpx;\n}\n\n.categories {\n  flex-wrap: wrap;\n  gap: 20rpx;\n  padding: 0 20rpx;\n  width: 100%;\n}\n\n.categories, .categories .category-item {\n  box-sizing: border-box;\n  display: flex;\n}\n\n.categories .category-item {\n  align-items: center;\n  aspect-ratio: 1;\n  background: #f5f7fa;\n  border-radius: 20rpx;\n  flex-direction: column;\n  justify-content: center;\n  margin-bottom: 60rpx;\n  overflow: visible;\n  position: relative;\n  transform: scale(.95);\n  transition: all .3s ease;\n  width: calc((100% - 100rpx) / 6);\n}\n\n.categories .category-item.active {\n  background: var(--theme-color);\n  transform: scale(1);\n}\n\n.categories .category-item.active .emoji-icon {\n  filter: brightness(1.2);\n}\n\n.categories .category-item .emoji-icon {\n  font-size: 44rpx;\n}\n\n.categories .category-item .label {\n  bottom: -40rpx;\n  color: #2c3e50;\n  font-size: 20rpx;\n  left: -30%;\n  overflow: hidden;\n  padding: 8rpx 0;\n  position: absolute;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 160%;\n}\n\n.time-picker {\n  padding: 40rpx 0;\n  width: 100%;\n}\n\n.time-picker .time-display {\n  align-items: center;\n  display: flex;\n  gap: 20rpx;\n  justify-content: center;\n}\n\n.time-picker .time-display .time {\n  color: #2c3e50;\n  font-size: 72rpx;\n  font-weight: 600;\n}\n\n.time-picker .time-display .period {\n  color: #5c6b7a;\n  font-size: 36rpx;\n}\n\n.save-button {\n  background: var(--theme-color);\n  border-radius: 20rpx;\n  box-shadow: 0 0 15rpx rgba(255, 159, 10, .15);\n  color: #fff;\n  font-size: 32rpx;\n  height: 100rpx;\n  margin-top: 60rpx;\n  width: 100%;\n}\n\n.skip-link {\n  color: #5c6b7a;\n  font-size: 28rpx;\n  margin-top: 30rpx;\n  text-decoration: underline;\n}\n\n.illustration {\n  height: 400rpx;\n  margin-top: 60rpx;\n  width: 400rpx;\n}\n\n.search-box {\n  margin-bottom: 30rpx;\n  padding: 0;\n  width: 100%;\n}\n\n.search-box .search-input {\n  background: #f5f7fa;\n  border-radius: 20rpx;\n  color: #2c3e50;\n  font-size: 28rpx;\n  height: 100rpx;\n  padding: 0 30rpx;\n  width: 100%;\n}\n\n.custom-habit {\n  margin: 0 0 30rpx;\n}\n\n.step-category {\n  padding-top: 60rpx;\n}\n\n.step-category .title {\n  margin-bottom: 60rpx;\n}\n\n.search-input {\n  margin-bottom: 0;\n  width: calc(66.66% - 10rpx);\n}\n\n.custom-habit {\n  gap: 20rpx;\n  margin-bottom: 40rpx;\n  padding: 30rpx;\n  width: 100%;\n}\n\n.custom-habit .label {\n  font-size: 32rpx;\n}\n\n.category-group {\n  margin-bottom: 40rpx;\n}\n\n.category-group:last-child {\n  margin-bottom: 0;\n}\n\n.search-row {\n  align-items: center;\n  display: flex;\n  gap: 20rpx;\n  margin-bottom: 40rpx;\n  width: 100%;\n}\n\n.search-input {\n  color: #2c3e50;\n  flex: 1;\n  font-size: 28rpx;\n  padding: 0 30rpx;\n}\n\n.custom-habit, .search-input {\n  background: #f5f7fa;\n  border-radius: 20rpx;\n  height: 100rpx;\n}\n\n.custom-habit {\n  align-items: center;\n  display: flex;\n  gap: 10rpx;\n  justify-content: center;\n  padding: 0;\n  width: calc(33.33% - 10rpx);\n}\n\n.custom-habit .icon {\n  font-size: 40rpx;\n}\n\n.custom-habit .label {\n  color: #2c3e50;\n  font-size: 28rpx;\n}\n\n.custom-habit:active {\n  background: #edf0f5;\n}\n\n.category-item:active, .next-button:active, .save-button:active {\n  opacity: .9;\n}\n\n.habit-suggestions {\n  margin: 20rpx 0 40rpx;\n}\n\n.habit-suggestions.theme-suggestions {\n  margin: 10rpx 0 20rpx;\n}\n\n.habit-suggestions.theme-suggestions .suggestion-title {\n  font-size: 26rpx;\n  margin-left: 10rpx;\n}\n\n.habit-suggestions .suggestion-title {\n  color: #5c6b7a;\n  font-size: 28rpx;\n  margin-bottom: 20rpx;\n}\n\n.habit-suggestions .suggestion-scroll {\n  -webkit-overflow-scrolling: touch;\n  white-space: nowrap;\n  width: 100%;\n}\n\n.habit-suggestions .suggestion-scroll ::-webkit-scrollbar {\n  color: transparent;\n  display: none;\n  height: 0;\n  width: 0;\n}\n\n.habit-suggestions .suggestion-cards {\n  display: inline-flex;\n}\n\n.habit-suggestions .suggestion-card {\n  background: #f5f7fa;\n  border-radius: 16rpx;\n  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, .05), 0 2rpx 8rpx rgba(0, 0, 0, .02);\n  display: inline-block;\n  margin-left: 10rpx;\n  margin-right: 10rpx;\n  padding: 20rpx;\n  transition: all .3s ease;\n  width: 300rpx;\n}\n\n.habit-suggestions .suggestion-card.theme-card {\n  background: #edf0f5;\n  width: 280rpx;\n}\n\n.habit-suggestions .suggestion-card.theme-card.active {\n  background: var(--theme-color);\n  color: #fff;\n  transform: scale(1.02);\n}\n\n.habit-suggestions .suggestion-card.theme-card.active .card-flag, .habit-suggestions .suggestion-card.theme-card.active .card-title {\n  color: #fff;\n}\n\n.habit-suggestions .suggestion-card:active {\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, .03), 0 1rpx 4rpx rgba(0, 0, 0, .01);\n  opacity: .9;\n  transform: scale(.98);\n}\n\n.habit-suggestions .suggestion-card .card-content {\n  display: flex;\n  flex-direction: column;\n  gap: 10rpx;\n}\n\n.habit-suggestions .suggestion-card .card-title {\n  color: #2c3e50;\n  font-size: 28rpx;\n  line-height: 1.4;\n  white-space: normal;\n}\n\n.habit-suggestions .suggestion-card .card-flag {\n  color: #5c6b7a;\n  font-size: 24rpx;\n  line-height: 1.4;\n  white-space: normal;\n}\n\n.input-footer {\n  align-items: center;\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20rpx;\n}\n\n.input-footer .counter, .input-footer .input-tip {\n  color: #5c6b7a;\n  font-size: 24rpx;\n}\n\n.step-header {\n  margin-bottom: 20rpx;\n  position: relative;\n}\n\n.step-header, .step-header .back-button {\n  align-items: center;\n  display: flex;\n}\n\n.step-header .back-button {\n  height: 80rpx;\n  justify-content: center;\n  left: 0;\n  position: absolute;\n  width: 80rpx;\n}\n\n.step-header .back-button .back-arrow {\n  color: #2c3e50;\n  font-size: 40rpx;\n}\n\n.step-header .back-button:active {\n  opacity: .9;\n}\n\n.step-header .habit-name {\n  color: #5c6b7a;\n  font-size: 32rpx;\n  text-align: center;\n  width: 100%;\n}\n\n.step-category .title {\n  margin-top: 20rpx;\n}\n\n.matched-emoji {\n  align-items: center;\n  background: #f5f7fa;\n  border-radius: 20rpx;\n  display: flex;\n  flex-direction: column;\n  height: 100rpx;\n  justify-content: center;\n  position: relative;\n  transform: scale(.95);\n  transition: all .3s ease;\n  width: 100rpx;\n}\n\n.matched-emoji .emoji {\n  font-size: 44rpx;\n}\n\n.matched-emoji .reset-tip {\n  bottom: -30rpx;\n  color: #5c6b7a;\n  font-size: 20rpx;\n  opacity: 0;\n  position: absolute;\n  text-align: center;\n  transition: opacity .3s;\n  width: 100%;\n}\n\n.matched-emoji:active {\n  background: var(--theme-color);\n  opacity: .9;\n  transform: scale(1);\n}\n\n.matched-emoji:active .emoji {\n  color: #fff;\n  filter: brightness(1.2);\n}\n\n.matched-emoji:active .reset-tip {\n  opacity: 1;\n}\n\n.complete-button {\n  align-items: center;\n  background: var(--theme-color);\n  border-radius: 20rpx;\n  bottom: 30rpx;\n  box-shadow: 0 0 15rpx rgba(255, 159, 10, .15);\n  box-sizing: border-box;\n  color: #fff;\n  display: flex;\n  font-size: 32rpx;\n  height: 100rpx;\n  justify-content: center;\n  left: 0;\n  margin: 30rpx auto;\n  padding: 0 40rpx;\n  position: absolute;\n  width: 100%;\n  z-index: 10;\n}\n\n.complete-button:active {\n  opacity: .9;\n}\n\n.emoji-tip {\n  color: #5c6b7a;\n  font-size: 28rpx;\n  margin-bottom: 30rpx;\n  text-align: center;\n}\n\n.categories-container {\n  flex: 1;\n  width: 100%;\n}\n\n.category-group:first-child .categories .category-item {\n  aspect-ratio: 1;\n  margin-bottom: 60rpx;\n  transform: scale(.95);\n  width: calc((100% - 100rpx) / 6);\n}\n\n.category-group:first-child .categories .category-item.active {\n  transform: scale(1);\n}\n\n.category-group:first-child .categories .category-item .emoji-icon {\n  font-size: 44rpx;\n}\n\n.category-group:first-child .categories .category-item .label {\n  bottom: -40rpx;\n  font-size: 20rpx;\n  left: -30%;\n  width: 160%;\n}\n\n.group-header {\n  align-items: center;\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20rpx;\n  padding-left: 20rpx;\n}\n\n.group-header .group-title {\n  color: #5c6b7a;\n  font-size: 26rpx;\n  margin-left: 10rpx;\n}\n\n.group-header .group-actions, .group-header .group-actions .lucky-button {\n  align-items: center;\n  display: flex;\n}\n\n.group-header .group-actions .lucky-button {\n  background: #f5f7fa;\n  border-radius: 30rpx;\n  gap: 8rpx;\n}\n\n.group-header .group-actions .lucky-button .lucky-text {\n  color: #5c6b7a;\n  font-size: 24rpx;\n  margin-left: 10rpx;\n}\n\n.group-header .group-actions .lucky-button .lucky-icon {\n  animation: spin 2s linear infinite;\n  font-size: 32rpx;\n}\n\n.group-header .group-actions .lucky-button:active {\n  opacity: .9;\n  transform: scale(.95);\n}\n\n@-webkit-keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(1turn);\n  }\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(1turn);\n  }\n}\n\n.theme-suggestions-container {\n  -webkit-overflow-scrolling: touch;\n  bottom: 200rpx;\n  flex: 1;\n  left: 0;\n  margin-top: 20rpx;\n  overflow-y: auto;\n  position: absolute;\n  right: 0;\n  top: 460rpx;\n  width: 100%;\n}\n\n.theme-suggestions-container::-webkit-scrollbar {\n  display: none;\n  height: 0;\n  width: 0;\n}\n\n.custom-emoji-btn {\n  align-items: center;\n  background: #f5f7fa;\n  border-radius: 20rpx;\n  display: flex;\n  gap: 8rpx;\n  height: 100rpx;\n  justify-content: center;\n  padding: 0 20rpx;\n}\n\n.custom-emoji-btn .btn-text {\n  color: #5c6b7a;\n  font-size: 24rpx;\n}\n\n.custom-emoji-btn .btn-icon {\n  font-size: 32rpx;\n}\n\n.custom-emoji-btn:active {\n  opacity: .9;\n  transform: scale(.95);\n}\n\n.edit-modal {\n  align-items: center;\n  background: rgba(0, 0, 0, .5);\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  left: 0;\n  position: fixed;\n  top: 0;\n  width: 100%;\n  z-index: 1000;\n}\n\n.edit-modal .modal-content {\n  background: #fff;\n  border-radius: 20rpx;\n  max-width: 600rpx;\n  padding: 40rpx;\n  position: relative;\n  width: 80%;\n}\n\n.edit-modal .modal-content .modal-header {\n  align-items: center;\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20rpx;\n}\n\n.edit-modal .modal-content .modal-header .modal-title {\n  color: #2c3e50;\n  font-size: 32rpx;\n  font-weight: 600;\n}\n\n.edit-modal .modal-content .modal-header .close-btn {\n  color: #5c6b7a;\n  cursor: pointer;\n  font-size: 32rpx;\n}\n\n.edit-modal .modal-content .edit-textarea {\n  background: #f5f7fa;\n  border-radius: 20rpx;\n  box-sizing: border-box;\n  color: #2c3e50;\n  font-size: 28rpx;\n  height: 80rpx;\n  margin-bottom: 20rpx;\n  padding: 20rpx;\n  width: 100%;\n}\n\n.edit-modal .modal-content .modal-footer {\n  align-items: center;\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 20rpx;\n}\n\n.edit-modal .modal-content .modal-footer .modal-buttons {\n  display: flex;\n  gap: 20rpx;\n}\n\n.edit-modal .modal-content .modal-footer .modal-buttons .cancel-btn {\n  background: transparent;\n  border-radius: 20rpx;\n  color: #5c6b7a;\n  font-size: 28rpx;\n  padding: 10rpx 30rpx;\n}\n\n.edit-modal .modal-content .modal-footer .modal-buttons .save-btn {\n  background: var(--theme-color);\n  border-radius: 20rpx;\n  color: #fff;\n  font-size: 28rpx;\n  padding: 10rpx 30rpx;\n}\n\n.icon-actions {\n  gap: 20rpx;\n}\n\n.color-picker-btn, .icon-actions {\n  display: flex;\n}\n\n.color-picker-btn {\n  align-items: center;\n  background: #f5f7fa;\n  border-radius: 20rpx;\n  gap: 12rpx;\n  height: 100rpx;\n  justify-content: center;\n  padding: 0 20rpx;\n}\n\n.color-picker-btn .color-preview {\n  background-color: #f5f7fa; /* 使用默认的浅灰色背景 */\n  border: 2rpx solid #e2e7ed;\n  border-radius: 16rpx;\n  height: 32rpx;\n  width: 32rpx;\n}\n\n.color-picker-btn .btn-text {\n  color: #5c6b7a;\n  font-size: 24rpx;\n}\n\n.color-picker-btn:active {\n  opacity: .9;\n  transform: scale(.95);\n}\n\n.color-picker-modal {\n  display: none;\n}\n\n.settings-modal {\n  align-items: center;\n  background: rgba(0, 0, 0, .5);\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  left: 0;\n  position: fixed;\n  top: 0;\n  width: 100%;\n  z-index: 1000;\n}\n\n.settings-modal .modal-content {\n  background: #fff;\n  border-radius: 20rpx;\n  max-height: 80vh;\n  max-width: 600rpx;\n  overflow-y: auto;\n  padding: 40rpx;\n  width: 90%;\n}\n\n.settings-modal .modal-content .settings-preview {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 40rpx;\n}\n\n.settings-modal .modal-content .settings-preview .preview-box {\n  align-items: center;\n  border: 4rpx solid #e2e7ed;\n  border-radius: 30rpx;\n  display: flex;\n  height: 120rpx;\n  justify-content: center;\n  width: 120rpx;\n}\n\n.settings-modal .modal-content .settings-preview .preview-box .preview-emoji {\n  font-size: 60rpx;\n}\n\n.settings-modal .modal-content .settings-section {\n  margin-bottom: 40rpx;\n}\n\n.settings-modal .modal-content .settings-section .section-title {\n  color: #5c6b7a;\n  font-size: 28rpx;\n  margin-bottom: 20rpx;\n}\n\n.settings-modal .modal-content .settings-section .emoji-input {\n  background: #f5f7fa;\n  border-radius: 20rpx;\n  box-sizing: border-box;\n  color: #2c3e50;\n  font-size: 28rpx;\n  height: 80rpx;\n  line-height: 1;\n  padding: 20rpx 30rpx;\n  text-align: center;\n  width: 100%;\n}\n\n.settings-modal .modal-content .settings-section .color-input-row {\n  align-items: center;\n  display: flex;\n  gap: 20rpx;\n  margin-bottom: 20rpx;\n}\n\n.settings-modal .modal-content .settings-section .color-input-row .color-input {\n  background: #f5f7fa;\n  border-radius: 20rpx;\n  color: #2c3e50;\n  flex: 1;\n  font-size: 28rpx;\n  height: 80rpx;\n  padding: 0 30rpx;\n}\n\n.settings-modal .modal-content .settings-section .color-input-row .custom-color-preview {\n  border: 2rpx solid #e2e7ed;\n  border-radius: 20rpx;\n  flex-shrink: 0;\n  height: 80rpx;\n  transition: all .3s ease;\n  width: 80rpx;\n}\n\n.settings-modal .modal-content .settings-section .color-input-row .custom-color-preview:active {\n  transform: scale(.95);\n}\n\n.settings-modal .modal-content .settings-section .preset-colors {\n  display: grid;\n  gap: 20rpx;\n  grid-template-columns: repeat(4, 1fr);\n}\n\n.settings-modal .modal-content .settings-section .preset-colors .color-item {\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  gap: 10rpx;\n}\n\n.settings-modal .modal-content .settings-section .preset-colors .color-item.active .color-preview {\n  box-shadow: 0 0 0 4rpx var(--theme-color);\n  transform: scale(1.1);\n}\n\n.settings-modal .modal-content .settings-section .preset-colors .color-item .color-preview {\n  border: 2rpx solid #e2e7ed;\n  border-radius: 20rpx;\n  height: 80rpx;\n  transition: all .3s ease;\n  width: 80rpx;\n}\n\n.settings-modal .modal-content .settings-section .preset-colors .color-item .color-preview:active {\n  transform: scale(.95);\n}\n\n.settings-modal .modal-content .settings-section .preset-colors .color-item .color-name {\n  color: #5c6b7a;\n  font-size: 20rpx;\n  text-align: center;\n}\n\n.settings-modal .modal-content .modal-footer {\n  align-items: center;\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 30rpx;\n}\n\n.settings-modal .modal-content .modal-footer .modal-buttons {\n  display: flex;\n  gap: 20rpx;\n}\n\n.settings-modal .modal-content .modal-footer .modal-buttons .reset-btn {\n  background: #f5f7fa;\n  border-radius: 20rpx;\n  color: #5c6b7a;\n  font-size: 28rpx;\n  padding: 10rpx 30rpx;\n}\n\n.settings-modal .modal-content .modal-footer .modal-buttons .cancel-btn {\n  background: transparent;\n  border-radius: 20rpx;\n  color: #5c6b7a;\n  font-size: 28rpx;\n  padding: 10rpx 30rpx;\n}\n\n.settings-modal .modal-content .modal-footer .modal-buttons .save-btn {\n  background: var(--theme-color);\n  border-radius: 20rpx;\n  color: #fff;\n  font-size: 28rpx;\n  padding: 10rpx 30rpx;\n}\n\n.icon-settings {\n  background: #f5f7fa;\n  border-radius: 20rpx;\n  flex-direction: column;\n  gap: 8rpx;\n  height: 100rpx;\n  padding: 0 20rpx;\n}\n\n.icon-settings, .icon-settings .icon-preview {\n  align-items: center;\n  display: flex;\n  justify-content: center;\n}\n\n.icon-settings .icon-preview {\n  border: 2rpx solid #e2e7ed;\n  border-radius: 16rpx;\n  height: 60rpx;\n  width: 60rpx;\n}\n\n.icon-settings .icon-preview .emoji {\n  font-size: 32rpx;\n}\n\n.icon-settings .settings-tip {\n  color: #5c6b7a;\n  font-size: 20rpx;\n}\n\n.icon-settings:active {\n  opacity: .9;\n  transform: scale(.95);\n}\n\n\n.target-date {\n  margin: 20rpx 0;\n}\n\n.target-title {\n  font-size: 28rpx;\n  color: #666;\n  margin-bottom: 20rpx;\n}\n\n.date-picker {\n  background: #f5f7fa;\n  border-radius: 20rpx;\n  padding: 20rpx 30rpx;\n}\n\n.date-display {\n  display: flex;\n  align-items: center;\n  gap: 20rpx;\n}\n\n.date {\n  font-size: 32rpx;\n  color: #333;\n}\n\n.days-left {\n  font-size: 24rpx;\n  color: #666;\n}\n\n</style>","import MiniProgramPage from '/Users/linsir/Experiments/uni-app/habit-ai-uniapp/habit-ai-uniapp/pages/add-habit/add-habit.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","apiService"],"mappings":"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"}