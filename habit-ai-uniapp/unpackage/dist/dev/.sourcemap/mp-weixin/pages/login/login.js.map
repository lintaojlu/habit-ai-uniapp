{"version":3,"file":"login.js","sources":["pages/login/login.vue","pages/login/login.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <view class=\"logo-section\">\n      <image class=\"poster\" src=\"/static/poster.png\" mode=\"aspectFit\" />\n      <text class=\"app-name\">HabitAI</text>\n      <text class=\"slogan\">私人 AI，轻松养成好习惯</text>\n    </view>\n\n    <view class=\"form-section\">\n      <input \n        class=\"input-field\" \n        type=\"text\" \n        v-model=\"telephone\" \n        placeholder=\"手机号\"\n      />\n      <input \n        class=\"input-field\" \n        type=\"password\" \n        v-model=\"password\" \n        placeholder=\"密码\"\n      />\n      <button class=\"submit-button\" @tap=\"handleSubmit\">登录</button>\n      <text class=\"switch-mode\" @tap=\"goToRegister\">\n        没有账号？立即注册\n      </text>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { request } from '@/utils/api.js'\n\nexport default {\n  data() {\n    return {\n      telephone: '',  // 改为 telephone\n      password: ''\n    }\n  },\n  methods: {\n    goToRegister() {\n      uni.navigateTo({\n        url: '/pages/register/register'\n      })\n    },\n    async handleSubmit() {\n      if (!this.telephone || !this.password) {\n        uni.showToast({\n          title: '请填写完整信息',\n          icon: 'none'\n        })\n        return\n      }\n      \n      uni.showLoading({\n        title: '登录中...'\n      })\n      \n      try {\n        const res = await request({\n          url: '/habit-ai/user/login',\n          method: 'POST',\n          data: {\n            telephone: this.telephone,\n            password: this.password\n          }\n        })\n        \n        // 保存 token 和用户信息\n        uni.setStorageSync('token', res.token)\n        uni.setStorageSync('userId', res.user_id)\n        \n        uni.showToast({\n          title: '登录成功',\n          icon: 'success'\n        })\n        \n        // 跳转到首页\n        uni.reLaunch({\n          url: '/pages/index/index'\n        })\n      } catch (error) {\n        uni.showToast({\n          title: error.message || '登录失败',\n          icon: 'none'\n        })\n      } finally {\n        uni.hideLoading()\n      }\n    }\n  }\n}\n</script>\n\n<style>\n.container {\n  padding: 40rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  background-color: #fff;\n}\n\n.logo-section {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 80rpx;\n}\n\n.poster {\n  width: 400rpx;\n  height: 400rpx;\n  margin-bottom: 30rpx;\n  border-radius: 50%;\n}\n\n.app-name {\n  font-size: 48rpx;\n  font-weight: bold;\n  color: #2c3e50;\n  margin-bottom: 20rpx;\n}\n\n.slogan {\n  font-size: 32rpx;\n  color: #5c6b7a;\n}\n\n.form-section {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 30rpx;\n}\n\n.input-field {\n  width: 100%;\n  height: 100rpx;\n  background: #f5f7fa;\n  border-radius: 20rpx;\n  padding: 0 30rpx;\n  font-size: 32rpx;\n  color: #2c3e50;\n}\n\n.submit-button {\n  width: 100%;\n  height: 100rpx;\n  background: var(--theme-color);\n  border-radius: 20rpx;\n  color: #fff;\n  font-size: 32rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 20rpx;\n}\n\n.submit-button:active {\n  opacity: 0.9;\n}\n\n.switch-mode {\n  text-align: center;\n  color: var(--theme-color);\n  font-size: 28rpx;\n  margin-top: 30rpx;\n}\n</style>","import MiniProgramPage from '/Users/linsir/Experiments/uni-app/habit-ai-uniapp/habit-ai-uniapp/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","request"],"mappings":";;;;AAgCA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,WAAW;AAAA;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,eAAe;AACbA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,OACN;AAAA,IACF;AAAA,IACD,MAAM,eAAe;AACnB,UAAI,CAAC,KAAK,aAAa,CAAC,KAAK,UAAU;AACrCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AACD;AAAA,MACF;AAEAA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,OACR;AAED,UAAI;AACF,cAAM,MAAM,MAAMC,kBAAQ;AAAA,UACxB,KAAK;AAAA,UACL,QAAQ;AAAA,UACR,MAAM;AAAA,YACJ,WAAW,KAAK;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AAAA,SACD;AAGDD,sBAAAA,MAAI,eAAe,SAAS,IAAI,KAAK;AACrCA,sBAAAA,MAAI,eAAe,UAAU,IAAI,OAAO;AAExCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AAGDA,sBAAAA,MAAI,SAAS;AAAA,UACX,KAAK;AAAA,SACN;AAAA,MACD,SAAO,OAAO;AACdA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO,MAAM,WAAW;AAAA,UACxB,MAAM;AAAA,SACP;AAAA,MACH,UAAU;AACRA,sBAAAA,MAAI,YAAY;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;;;;;AC1FA,GAAG,WAAW,eAAe;"}