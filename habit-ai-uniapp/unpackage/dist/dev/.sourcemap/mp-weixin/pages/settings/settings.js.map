{"version":3,"file":"settings.js","sources":["pages/settings/settings.vue","pages/settings/settings.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 用户信息区域 -->\n    <view class=\"user-info-section\">\n      <view class=\"avatar-wrapper\">\n        <image class=\"avatar\" :src=\"userInfo.avatarUrl || '/static/default-avatar.png'\" mode=\"aspectFill\" />\n      </view>\n      <text class=\"nickname\">{{ userInfo.nickName || '未设置昵称' }}</text>\n    </view>\n\n    <!-- AI设置区域 -->\n    <view class=\"settings-section\">\n      <view class=\"section-title\">AI 设置</view>\n      <view class=\"setting-item\">\n        <text class=\"setting-label\">AI 角色</text>\n        <picker class=\"role-picker\" :value=\"selectedRoleIndex\" :range=\"aiRoles\" @change=\"onRoleChange\">\n          <view class=\"picker-value\">{{ aiRoles[selectedRoleIndex] }}</view>\n        </picker>\n      </view>\n    </view>\n\n    <!-- 用户反馈区域 -->\n    <view class=\"settings-section\">\n      <view class=\"section-title\">反馈与支持</view>\n      <view class=\"setting-item feedback-button\" @tap=\"onFeedback\">\n        <text class=\"setting-label\">意见反馈</text>\n        <text class=\"arrow\">></text>\n      </view>\n    </view>\n\n    <!-- 退出登录按钮 -->\n    <view class=\"logout-section\">\n      <button class=\"logout-button\" @tap=\"onLogout\">退出登录</button>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      userInfo: {\n        avatarUrl: '',\n        nickName: ''\n      },\n      aiRoles: ['助手', '教练', '朋友', '专家'],\n      selectedRoleIndex: 0\n    }\n  },\n  onLoad() {\n    this.loadUserInfo()\n    this.loadAISettings()\n  },\n  methods: {\n    loadUserInfo() {\n      // 从本地存储加载用户信息\n      const userInfo = uni.getStorageSync('userInfo')\n      if (userInfo) {\n        this.userInfo = userInfo\n      }\n    },\n    loadAISettings() {\n      // 从本地存储加载AI设置\n      const aiRole = uni.getStorageSync('aiRole')\n      if (aiRole) {\n        const index = this.aiRoles.indexOf(aiRole)\n        if (index !== -1) {\n          this.selectedRoleIndex = index\n        }\n      }\n    },\n    onRoleChange(e) {\n      this.selectedRoleIndex = e.detail.value\n      // 保存AI角色设置\n      uni.setStorageSync('aiRole', this.aiRoles[this.selectedRoleIndex])\n      uni.showToast({\n        title: 'AI角色已更新',\n        icon: 'success'\n      })\n    },\n    onFeedback() {\n      // 跳转到反馈页面或打开反馈表单\n      uni.showModal({\n        title: '意见反馈',\n        content: '请通过以下邮箱联系我们：\\nsupport@habitai.com',\n        showCancel: false\n      })\n    },\n    onLogout() {\n      uni.showModal({\n        title: '确认退出',\n        content: '确定要退出登录吗？',\n        success: (res) => {\n          if (res.confirm) {\n            // 清除用户信息和相关数据\n            uni.clearStorageSync()\n            // 重定向到登录页面\n            uni.reLaunch({\n              url: '/pages/index/index'\n            })\n          }\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style>\n.container {\n  padding: 40rpx;\n}\n\n.user-info-section {\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 60rpx;\n  padding: 40rpx 0;\n}\n\n.avatar-wrapper {\n  border-radius: 50%;\n  height: 160rpx;\n  margin-bottom: 20rpx;\n  overflow: hidden;\n  width: 160rpx;\n}\n\n.avatar {\n  height: 100%;\n  width: 100%;\n}\n\n.nickname {\n  color: #2c3e50;\n  font-size: 32rpx;\n  font-weight: 600;\n}\n\n.settings-section {\n  background: #fff;\n  border-radius: 20rpx;\n  margin-bottom: 40rpx;\n  padding: 30rpx;\n}\n\n.section-title {\n  color: #5c6b7a;\n  font-size: 28rpx;\n  margin-bottom: 20rpx;\n}\n\n.setting-item {\n  align-items: center;\n  display: flex;\n  justify-content: space-between;\n  padding: 20rpx 0;\n}\n\n.setting-label {\n  color: #2c3e50;\n  font-size: 30rpx;\n}\n\n.role-picker {\n  flex: 1;\n  margin-left: 20rpx;\n}\n\n.picker-value {\n  color: #2c3e50;\n  font-size: 30rpx;\n  text-align: right;\n}\n\n.feedback-button {\n  cursor: pointer;\n}\n\n.arrow {\n  color: #5c6b7a;\n  font-size: 30rpx;\n}\n\n.logout-section {\n  margin-top: 80rpx;\n  padding: 0 40rpx;\n}\n\n.logout-button {\n  background: var(--theme-color);  /* 修改为使用主题色变量 */\n  border-radius: 20rpx;\n  color: #fff;\n  font-size: 32rpx;\n  height: 88rpx;\n  line-height: 88rpx;\n}\n\n.logout-button:active {\n  opacity: 0.9;\n}\n</style>","import MiniProgramPage from '/Users/linsir/Experiments/uni-app/habit-ai-uniapp/habit-ai-uniapp/pages/settings/settings.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAsCA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,UAAU;AAAA,QACR,WAAW;AAAA,QACX,UAAU;AAAA,MACX;AAAA,MACD,SAAS,CAAC,MAAM,MAAM,MAAM,IAAI;AAAA,MAChC,mBAAmB;AAAA,IACrB;AAAA,EACD;AAAA,EACD,SAAS;AACP,SAAK,aAAa;AAClB,SAAK,eAAe;AAAA,EACrB;AAAA,EACD,SAAS;AAAA,IACP,eAAe;AAEb,YAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAC9C,UAAI,UAAU;AACZ,aAAK,WAAW;AAAA,MAClB;AAAA,IACD;AAAA,IACD,iBAAiB;AAEf,YAAM,SAASA,cAAAA,MAAI,eAAe,QAAQ;AAC1C,UAAI,QAAQ;AACV,cAAM,QAAQ,KAAK,QAAQ,QAAQ,MAAM;AACzC,YAAI,UAAU,IAAI;AAChB,eAAK,oBAAoB;AAAA,QAC3B;AAAA,MACF;AAAA,IACD;AAAA,IACD,aAAa,GAAG;AACd,WAAK,oBAAoB,EAAE,OAAO;AAElCA,oBAAG,MAAC,eAAe,UAAU,KAAK,QAAQ,KAAK,iBAAiB,CAAC;AACjEA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,OACP;AAAA,IACF;AAAA,IACD,aAAa;AAEXA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,YAAY;AAAA,OACb;AAAA,IACF;AAAA,IACD,WAAW;AACTA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AAEfA,0BAAAA,MAAI,iBAAiB;AAErBA,0BAAAA,MAAI,SAAS;AAAA,cACX,KAAK;AAAA,aACN;AAAA,UACH;AAAA,QACF;AAAA,OACD;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;ACxGA,GAAG,WAAW,eAAe;"}