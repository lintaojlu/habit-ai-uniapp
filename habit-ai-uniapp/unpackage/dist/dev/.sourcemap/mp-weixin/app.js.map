{"version":3,"file":"app.js","sources":["App.vue"],"sourcesContent":["<script>\r\nimport * as utils_storage from \"./utils/storage.js\";\r\n\r\nexport default {\r\n  onLaunch() {\r\n    console.log(\"App Launch\");\r\n    this.checkAndRestoreData();\r\n    utils_storage.checkAutoBackup();\r\n  },\r\n  onShow() {\r\n    console.log(\"App Show\");\r\n  },\r\n  onHide() {\r\n    console.log(\"App Hide\");\r\n    utils_storage.checkAutoBackup();\r\n  },\r\n  methods: {\r\n    async checkAndRestoreData() {\r\n      const habits = uni.getStorageSync(\"habits\");\r\n      if (!habits || habits.length === 0) {\r\n        const backupInfo = utils_storage.checkBackupAvailable();\r\n        if (backupInfo.available) {\r\n          uni.showModal({\r\n            title: \"发现数据备份\",\r\n            content: \"检测到您有可用的数据备份，是否恢复？\",\r\n            success: (res) => {\r\n              if (res.confirm) {\r\n                const result = utils_storage.restoreFromBackup();\r\n                if (result.success) {\r\n                  uni.showToast({\r\n                    title: \"数据恢复成功\",\r\n                    icon: \"success\"\r\n                  });\r\n                } else {\r\n                  uni.showToast({\r\n                    title: \"数据恢复失败\",\r\n                    icon: \"none\"\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.container, page {\r\n    background-color: #fff;\r\n}\r\n\r\n.container {\r\n    min-height: 100vh;\r\n}\r\n\r\npage {\r\n    --status-bar-height: 25px;\r\n    --top-window-height: 0px;\r\n    --window-top: 0px;\r\n    --window-bottom: 0px;\r\n    --window-left: 0px;\r\n    --window-right: 0px;\r\n    --window-magin: 0px;\r\n}\r\n\r\n[data-c-h=\"true\"] {\r\n    display: none!important;\r\n}\r\n</style>"],"names":["uni","utils_storage.checkAutoBackup","utils_storage.checkBackupAvailable","utils_storage.restoreFromBackup"],"mappings":";;;;;;;;;AAGA,MAAK,YAAU;AAAA,EACb,WAAW;AACTA,kBAAAA,mCAAY,YAAY;AACxB,SAAK,oBAAmB;AACxBC,kBAAAA;EACD;AAAA,EACD,SAAS;AACPD,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AAAA,EACvB;AAAA,EACD,SAAS;AACPA,kBAAAA,MAAY,MAAA,OAAA,iBAAA,UAAU;AACtBC,kBAAAA;EACD;AAAA,EACD,SAAS;AAAA,IACP,MAAM,sBAAsB;AAC1B,YAAM,SAASD,cAAAA,MAAI,eAAe,QAAQ;AAC1C,UAAI,CAAC,UAAU,OAAO,WAAW,GAAG;AAClC,cAAM,aAAaE,cAAAA;AACnB,YAAI,WAAW,WAAW;AACxBF,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,SAAS;AAAA,YACT,SAAS,CAAC,QAAQ;AAChB,kBAAI,IAAI,SAAS;AACf,sBAAM,SAASG,cAAAA;AACf,oBAAI,OAAO,SAAS;AAClBH,gCAAAA,MAAI,UAAU;AAAA,oBACZ,OAAO;AAAA,oBACP,MAAM;AAAA,kBACR,CAAC;AAAA,uBACI;AACLA,gCAAAA,MAAI,UAAU;AAAA,oBACZ,OAAO;AAAA,oBACP,MAAM;AAAA,kBACR,CAAC;AAAA,gBACH;AAAA,cACF;AAAA,YACF;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;"}