{"version":3,"file":"AICharacterList.js","sources":["components/AICharacterList.vue","/Users/linsir/Experiments/uni-app/habit-ai-uniapp/habit-ai-uniapp/components/AICharacterList.vue?type=component"],"sourcesContent":["<template>\n  <view class=\"character-list\">\n    <view \n      v-for=\"character in characters\" \n      :key=\"character.character_id\" \n      class=\"character-item\"\n      @tap=\"selectCharacter(character)\"\n      :class=\"{ 'selected': selectedId === character.character_id }\"\n    >\n      <text class=\"character-icon\">{{ character.icon }}</text>\n      <view class=\"character-info\">\n        <text class=\"character-name\">{{ character.name }}</text>\n        <text class=\"character-desc\">{{ character.description }}</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { apiService } from '@/utils/api.js'\n\nexport default {\n  name: 'AICharacterList',\n  \n  props: {\n    show: {\n      type: Boolean,\n      default: false\n    },\n    value: {\n      type: String,\n      default: ''\n    }\n  },\n\n  data() {\n    return {\n      characters: [],\n      currentIndex: 0,\n      isClosingDown: false,\n      isDragging: false,\n      startY: 0,\n      currentY: 0\n    }\n  },\n\n  computed: {\n    currentCharacter() {\n      return this.characters[this.currentIndex] || {}\n    },\n    \n    dragStyle() {\n      if (!this.isDragging) return {}\n      const translateY = Math.max(0, this.currentY - this.startY)\n      return {\n        transform: `translateY(${translateY}px)`,\n        transition: 'none'\n      }\n    }\n  },\n\n  created() {\n    this.loadCharacters()\n  },\n\n  methods: {\n    async loadCharacters() {\n      try {\n        const response = await apiService.getAICharacterList()\n        if (response.status === 'success') {\n          this.characters = response.data\n          if (this.value) {\n            const index = this.characters.findIndex(c => c.character_id === this.value)\n            if (index !== -1) {\n              this.currentIndex = index\n            }\n          }\n        }\n      } catch (error) {\n        console.error('加载 AI 角色失败:', error)\n        uni.showToast({\n          title: '加载失败',\n          icon: 'none'\n        })\n      }\n    },\n\n    onSwiperChange(e) {\n      this.currentIndex = e.detail.current\n      const character = this.characters[this.currentIndex]\n      this.$emit('input', character.character_id)\n      this.$emit('change', character)\n    },\n\n    handleTouchStart(e) {\n      this.startY = e.touches[0].clientY\n      this.isDragging = true\n    },\n\n    handleTouchMove(e) {\n      if (!this.isDragging) return\n      this.currentY = e.touches[0].clientY\n      e.preventDefault()\n    },\n\n    handleTouchEnd(e) {\n      if (!this.isDragging) return\n      const dragDistance = this.currentY - this.startY\n      if (dragDistance > 100) {\n        this.closeCard()\n      }\n      this.isDragging = false\n      this.startY = 0\n      this.currentY = 0\n    },\n\n    closeCard() {\n      this.isClosingDown = true\n      setTimeout(() => {\n        this.$emit('update:show', false)\n        this.isClosingDown = false\n      }, 500)\n    },\n\n    handleContainerClick() {\n      this.closeCard()\n    }\n  }\n}\n</script>\n\n<style>\n.character-list {\n  padding: 20rpx;\n}\n\n.character-item {\n  display: flex;\n  align-items: center;\n  padding: 30rpx;\n  margin-bottom: 20rpx;\n  background: #ffffff;\n  border-radius: 12rpx;\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n}\n\n.character-item.selected {\n  background: var(--theme-color);\n}\n\n.character-item.selected .character-name,\n.character-item.selected .character-desc {\n  color: #ffffff;\n}\n\n.character-icon {\n  font-size: 48rpx;\n  margin-right: 20rpx;\n}\n\n.character-info {\n  flex: 1;\n}\n\n.character-name {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 8rpx;\n}\n\n.character-desc {\n  font-size: 26rpx;\n  color: #666;\n}\n</style>","import Component from '/Users/linsir/Experiments/uni-app/habit-ai-uniapp/habit-ai-uniapp/components/AICharacterList.vue'\nwx.createComponent(Component)"],"names":["apiService","uni"],"mappings":";;;AAqBA,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EAEN,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IACX;AAAA,EACD;AAAA,EAED,OAAO;AACL,WAAO;AAAA,MACL,YAAY,CAAE;AAAA,MACd,cAAc;AAAA,MACd,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,QAAQ;AAAA,MACR,UAAU;AAAA,IACZ;AAAA,EACD;AAAA,EAED,UAAU;AAAA,IACR,mBAAmB;AACjB,aAAO,KAAK,WAAW,KAAK,YAAY,KAAK,CAAC;AAAA,IAC/C;AAAA,IAED,YAAY;AACV,UAAI,CAAC,KAAK;AAAY,eAAO,CAAC;AAC9B,YAAM,aAAa,KAAK,IAAI,GAAG,KAAK,WAAW,KAAK,MAAM;AAC1D,aAAO;AAAA,QACL,WAAW,cAAc,UAAU;AAAA,QACnC,YAAY;AAAA,MACd;AAAA,IACF;AAAA,EACD;AAAA,EAED,UAAU;AACR,SAAK,eAAe;AAAA,EACrB;AAAA,EAED,SAAS;AAAA,IACP,MAAM,iBAAiB;AACrB,UAAI;AACF,cAAM,WAAW,MAAMA,UAAU,WAAC,mBAAmB;AACrD,YAAI,SAAS,WAAW,WAAW;AACjC,eAAK,aAAa,SAAS;AAC3B,cAAI,KAAK,OAAO;AACd,kBAAM,QAAQ,KAAK,WAAW,UAAU,OAAK,EAAE,iBAAiB,KAAK,KAAK;AAC1E,gBAAI,UAAU,IAAI;AAChB,mBAAK,eAAe;AAAA,YACtB;AAAA,UACF;AAAA,QACF;AAAA,MACA,SAAO,OAAO;AACdC,sBAAAA,MAAA,MAAA,SAAA,wCAAc,eAAe,KAAK;AAClCA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AAAA,MACH;AAAA,IACD;AAAA,IAED,eAAe,GAAG;AAChB,WAAK,eAAe,EAAE,OAAO;AAC7B,YAAM,YAAY,KAAK,WAAW,KAAK,YAAY;AACnD,WAAK,MAAM,SAAS,UAAU,YAAY;AAC1C,WAAK,MAAM,UAAU,SAAS;AAAA,IAC/B;AAAA,IAED,iBAAiB,GAAG;AAClB,WAAK,SAAS,EAAE,QAAQ,CAAC,EAAE;AAC3B,WAAK,aAAa;AAAA,IACnB;AAAA,IAED,gBAAgB,GAAG;AACjB,UAAI,CAAC,KAAK;AAAY;AACtB,WAAK,WAAW,EAAE,QAAQ,CAAC,EAAE;AAC7B,QAAE,eAAe;AAAA,IAClB;AAAA,IAED,eAAe,GAAG;AAChB,UAAI,CAAC,KAAK;AAAY;AACtB,YAAM,eAAe,KAAK,WAAW,KAAK;AAC1C,UAAI,eAAe,KAAK;AACtB,aAAK,UAAU;AAAA,MACjB;AACA,WAAK,aAAa;AAClB,WAAK,SAAS;AACd,WAAK,WAAW;AAAA,IACjB;AAAA,IAED,YAAY;AACV,WAAK,gBAAgB;AACrB,iBAAW,MAAM;AACf,aAAK,MAAM,eAAe,KAAK;AAC/B,aAAK,gBAAgB;AAAA,MACtB,GAAE,GAAG;AAAA,IACP;AAAA,IAED,uBAAuB;AACrB,WAAK,UAAU;AAAA,IACjB;AAAA,EACF;AACF;;;;;;;;;;;;;;;;AC/HA,GAAG,gBAAgB,SAAS;"}